<!DOCTYPE html>
<html lang="en-US">
  
<!-- Mirrored from discuss.iatistandard.org/t/python3-upgrade-proposed-publishing-statistics-changes-comment-by-15th-april/1924 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 21 Jan 2021 15:31:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta charset="utf-8">
    <title>Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April) - Notifications - IATI Community Discussions</title>
    <meta name="description" content="As outlined in a previous Discuss post, the Technical Team has been working towards upgrading the programming language that is used across a number of IATI tools from Python 2.x to Python 3.x 
One of the tools that is un&amp;hellip;">
    <meta name="generator" content="Discourse 2.6.0.beta1 - https://github.com/discourse/discourse version fe7a7ecf6cc9a8e048c8250859be179502041feb">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72_2_32x32.svg">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72_2_180x180.svg">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1924.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://discuss.codeforiati.org","potentialAction":{"@type":"SearchAction","target":"https://discuss.codeforiati.org/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="IATI Community Discussions Search">

      <link href="../../stylesheets/desktop_97eab4872dd7e0bbc07f97051ddccc2321e7baf7.css_%3b%20filename_%3dUTF-8%27%27desktop_97eab4872dd7e0bbc07f97051ddccc2321e7baf71522.css?__ws=discuss.iatistandard.org" media="all" rel="stylesheet" data-target="desktop" data-theme-id="5"/>
      <link href="../../stylesheets/desktop_theme_5_073cbd05d898fc0ac65983595990f500f00f69ca.css_%3b%20filename_%3dUTF-8%27%27desktop_theme_5_073cbd05d898fc0ac65983595990f500f00f69ca1522.css?__ws=discuss.iatistandard.org" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="5"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)&#39;" href="1924.rss" />
    <meta property="og:site_name" content="IATI Community Discussions" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://discuss.codeforiati.org/uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg" />
<meta property="og:image" content="https://discuss.codeforiati.org/uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg" />
<meta property="og:url" content="https://discuss.codeforiati.org/t/python3-upgrade-proposed-publishing-statistics-changes-comment-by-15th-april/1924" />
<meta name="twitter:url" content="https://discuss.codeforiati.org/t/python3-upgrade-proposed-publishing-statistics-changes-comment-by-15th-april/1924" />
<meta property="og:title" content="Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)" />
<meta name="twitter:title" content="Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)" />
<meta property="og:description" content="As outlined in a previous Discuss post, the Technical Team has been working towards upgrading the programming language that is used across a number of IATI tools from Python 2.x to Python 3.x  One of the tools that is undergoing upgrade work is IATIâ€™s Publishing Statistics site.  Some of the functionality changes between Python2 and Python3 have led to some scores in the Publishing Statistics pages altering slightly. These changes - and how we propose to handle them - are summarised below:  Chan..." />
<meta name="twitter:description" content="As outlined in a previous Discuss post, the Technical Team has been working towards upgrading the programming language that is used across a number of IATI tools from Python 2.x to Python 3.x  One of the tools that is undergoing upgrade work is IATIâ€™s Publishing Statistics site.  Some of the functionality changes between Python2 and Python3 have led to some scores in the Publishing Statistics pages altering slightly. These changes - and how we propose to handle them - are summarised below:  Chan..." />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="2 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 â¤" />
<meta property="article:published_time" content="2020-04-06T11:14:50+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    <div id="top">
      <div id="header">
        <div id="header_container">
    
    <table id="table_header"><tbody><tr>
      <td><a href="../welcome-to-iati-discuss/6.html" title=""><img src="https://styles.iatistandard.org/assets/svg/source/logo-colour.svg" id="logo"></a>&nbsp;</td>
      <td><img alt="" id="logo-delimiter" src="../../images/logo-delimiter.html">&nbsp;</td>
      
    </tr></tbody></table>
    </div>
          <ul class="navigation-utility">
        <li id="section-news" class="navigation-utility__item"><a href="http://iatistandard.org/en/news/">News</a></li>
        <li id="section-events" class="navigation-utility__item"><a href="http://iatistandard.org/en/events/">Events</a></li>
        <li id="section-contact" class="navigation-utility__item"><a href="http://iatistandard.org/en/contact/">Contact</a></li>
      </ul>
        <nav class="navigation-primary" id="navigation-primary">

            <ul id="navigation-primary__items">
              <li id="section-about" class="navigation-primary__item"><a href="http://iatistandard.org/en/about/">About</a></li>
      				<li id="section-standard" class="navigation-primary__item"><a href="http://iatistandard.org/en/iati-standard">IATI Standard</a></li>
      				<li id="section-data" class="navigation-primary__item"><a href="http://iatistandard.org/en/using-data">Using Data</a></li>
      				<li id="section-support" class="navigation-primary__item"><a href="http://iatistandard.org/en/guidance/">Guidance &amp; Support</a></li>
      				<li id="section-community" class="navigation-primary__item"><a href="../../index.html">Community</a></li>
            </ul>
          </nav>
        <nav>
    </nav></div>
                <div id="top-menu-background">
        <div id="top-menu">
          <ul id="green" style="width: 100%;">
            <li class="clazz tab_home first active"><a href="../../index.html" class="tab">Home</a></li>
            <li class="main tab_forums first"><a href="../../c/standard-management/35.html" class="tab">IATI Standard Consultations</a></li>
            <li class="main tab_forums first"><a href="http://support.iatistandard.org/hc/en-us/categories/201849026-Upgrading-the-IATI-Standards" class="tab">Archive</a></li>
            <li class="main tab_forums first"><a href="https://iaticonnect.org/" class="tab">Discuss has moved to IATI Connect</a></li>
            
            <li class="main clazz tab_new community-nav-right"><a href="https://iatistandard.org/en/contact/" class="tab">Contact IATI</a></li>
          </ul>
        </div>
      </div>
    </div>
    <header>
      <a href="../../index.html">
          <img src="../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg" alt="IATI Community Discussions" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="1924.html">Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/notifications/29.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F73357'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Notifications</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/IATI-techteam.html'><span itemprop='name'>IATI-techteam</span></a>
            (IATI Technical Team)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-04-06T11:14:50Z' class='post-time'>
                April 6, 2020, 11:14am
              </time>
              <meta itemprop='dateModified' content='2020-04-06T11:14:50Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As outlined in a previous <a href="../python-2-x-deprecation-notice/1725/4.html">Discuss post</a>, the Technical Team has been working towards upgrading the programming language that is used across a number of IATI tools from Python 2.x to Python 3.x</p>
<p>One of the tools that is undergoing upgrade work is IATIâ€™s <a href="http://publishingstats.iatistandard.org/">Publishing Statistics site.</a></p>
<p>Some of the functionality changes between Python2 and Python3 have led to some scores in the Publishing Statistics pages altering slightly. These changes - and how we propose to handle them - are summarised below:</p>
<p><strong>Change to <a href="https://stackoverflow.com/questions/10825926/python-3-x-rounding-behavior">â€˜Bankersâ€™ Roundingâ€™</a></strong></p>
<ul>
<li>In Python2, x.5 numbers are rounded away from 0. E.g. 75.5 rounds to 76, 76.5 rounds to 77.</li>
<li>In Python3, x.5 numbers are rounded to the nearest even integer. Therefore 75.5 still rounds to 76, but 76.5 would also round to 76.</li>
<li>This means in Python3 that two publishers with a score that is a whole integer different in an initial calculation (e.g. 75.5 and 76.5) could be assigned the same score - 76 in this case.</li>
<li>The Technical Team proposes that we amend the code so that the Python2 functionality is replicated (while still upgrading the language itself to Python3), so that those two publishers would continue to score 76 and 77, respectively.</li>
</ul>
<p><strong>Change to <a href="https://stackoverflow.com/questions/19507808/python3-integer-division">integer division</a> functionality</strong></p>
<ul>
<li>In Python2, an integer divided by another integer, yields an integer. E.g. (2 / 3) * 100 = 66%</li>
<li>In Python3, an integer divided by another integer, yields a â€˜floatâ€™. E.g. (2 / 3) * 100 = 66.66%</li>
<li>The Technical Team proposes that the core Python3 functionality is retained. Therefore where an initial calculation of 66.66 is currently output as 66, this will change to the value being output as 67.</li>
</ul>
<p>The only material difference to the metrics (as a result of the integer division change)  is that some values in the Publishing Statistics  calculations will be <strong>one unit higher</strong> than they currently are. Therefore, <strong>no publisher will be penalised by the changes that we propose.</strong></p>
<p>We welcome the communityâ€™s thoughts on this before proceeding with the amendments and deploying to the live Publisher Statistics site. Please provide your input by <strong>Wednesday 15th April.</strong> The upgrade will be implemented following this if there are no objections.</p>
<p>Many thanks,<br>
IATI Tech Team</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/andylolz.html'><span itemprop='name'>andylolz</span></a>
            (Andy Lulham)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-04-07T12:02:39Z' class='post-time'>
                April 7, 2020, 12:02pm
              </time>
              <meta itemprop='dateModified' content='2020-04-07T12:02:39Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="1" data-topic="1924">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/discuss.iatistandard.org/iati-techteam/40/432_2.png" class="avatar"> IATI-techteam:</div>
<blockquote>
<ul>
<li>The Technical Team proposes that we amend the code so that the Python2 functionality is replicated (while still upgrading the language itself to Python3), so that those two publishers would continue to score 76 and 77, respectively.</li>
</ul>
</blockquote>
</aside>
<p>This seems fine to me. A purely technical upgrade like this shouldnâ€™t affect the output, so I think itâ€™s okay to reproduce python2 rounding (and consider migrating to bankers rounding at a later date).</p>
<aside class="quote no-group" data-post="1" data-topic="1924">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/discuss.iatistandard.org/iati-techteam/40/432_2.png" class="avatar"> IATI-techteam:</div>
<blockquote>
<ul>
<li>Therefore where an initial calculation of 66.66 is currently output as 66, this will change to the value being output as 67.</li>
</ul>
</blockquote>
</aside>
<p>This sounds like a bug in the existing code â€“ 66.66 shouldnâ€™t be rounded to 66. In python2, integers should be cast to floats first. However, Iâ€™m not able to see an instance of this bug in the publishing statistics code. <strong>Please could you point to an example?</strong> (I see it in the coverage code, but obviously that is not currently in use.) Thanks!</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/alex_miller.html'><span itemprop='name'>alex_miller</span></a>
            (Alex Miller)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-04-14T14:38:08Z' class='post-time'>
                April 14, 2020,  2:38pm
              </time>
              <meta itemprop='dateModified' content='2020-04-14T14:38:08Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Hi Andy,</p>
<p>Examples are scattered throughout the code, but hereâ€™s one in particular: <a href="https://github.com/IATI/IATI-Publishing-Statistics/blob/master/IATI-Dashboard/summary_stats.py#L105">https://github.com/IATI/IATI-Publishing-Statistics/blob/master/IATI-Dashboard/summary_stats.py#L105</a></p>
<p>You can see the integer is cast to int before being divided by a length, which is also an integer.</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/andylolz.html'><span itemprop='name'>andylolz</span></a>
            (Andy Lulham)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-04-14T17:20:45Z' class='post-time'>
                April 14, 2020,  5:20pm
              </time>
              <meta itemprop='dateModified' content='2020-04-14T17:20:45Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks Alex! Youâ€™re absolutely right.</p>
<p>Okay, soâ€¦ It looks like there are a number of rounding issues in this code. Thereâ€™s a lot of coercing and casting going on. It might be clearer and more accurate to use floats throughout, and leave all the rounding to presentation in the template (<a href="https://github.com/IATI/IATI-Dashboard/issues/403" rel="nofollow noopener">rounding up where applicable, as per this</a>).</p>
<p>Iâ€™d suggest doing this as a separate piece of work to the python3 upgrade, since itâ€™s not really related to that piece of work. Itâ€™s a happy coincidence that python3 happens to handle division differentlyâ€¦ But it looks like there are other rounding issues here.</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/stevieflow.html'><span itemprop='name'>stevieflow</span></a>
            (Steven Flower)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-04-15T15:21:21Z' class='post-time'>
                April 15, 2020,  3:21pm
              </time>
              <meta itemprop='dateModified' content='2020-04-15T15:21:21Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-post="1" data-topic="1924">
<div class="title">
<div class="quote-controls"></div>
<img alt width="20" height="20" src="../../user_avatar/discuss.iatistandard.org/iati-techteam/40/432_2.png" class="avatar"> IATI-techteam:</div>
<blockquote>
<p>some values in the Publishing Statistics calculations will be <strong>one unit higher</strong> than they currently are.</p>
</blockquote>
</aside>
<p>Is there any way to list / identify which values will be affected?  Whilst flagged that nobody will be negatively changed, itâ€™s important to know what - as publishers have no control / input to this changeâ€¦ (usually, a publisher can only influence their metrics on publisher statistics by updating their IATI publication)</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/IATI-techteam.html'><span itemprop='name'>IATI-techteam</span></a>
            (IATI Technical Team)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-04T14:47:27Z' class='post-time'>
                May 4, 2020,  2:47pm
              </time>
              <meta itemprop='dateModified' content='2020-05-04T14:47:27Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>The Tech Team has completed the coding of the upgrade from Python2 to Python3. In order to test the exact differences the code introduces, we have created two versions of the output based on a static pull of the Registry data. You can see the differences in the versions here:<a href="https://github.com/akmiller01/Publishing-Changes/pull/1/files"> https://github.com/akmiller01/Publishing-Changes/pull/1/files</a></p>
<p>As we suspected, the difference in the way that Python2 and Python3 treat integer division has resulted only in a handful of the statistics increasing by 1, and in some instances by 2 units.</p>
<p>Of the cases where the statistic increased by 2 units, we concluded that this was an artifact of the two versions being run at slightly different times (once a date passes, an activity is no longer considered forward-looking, for e.g.).</p>
<p>The underlying JSON files running the HTML are identical, so all of the above changes are only the result of the integer division and rounding differences. Please note the stats generated in this study were based off of a static pull of the Registry data, and as such are not directly comparable with the live version of publishing statistics (only comparable with each other).</p>
<p>Even while trying to hold the data constant, the nature of how the statistics are generated does depend heavily on the computer clock at the time of running, so it is possible that some of the small increases are due to the two versions being run at slightly different times.</p>
<p><a class="mention" href="../../u/andylolz.html">@andylolz</a> These differences are due to the intrinsic ways in which Python2 and Python3 vary with regard to integers and rounding. While we could try and separate this slight change in the statistics with the version upgrade, it would be an exercise in re-introducing deprecated behavior into the newer version</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="1" />
           <span class='post-likes'>1 Like</span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='IATI Community Discussions'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='../../uploads/default/original/1X/6b91f9ecc20e7554001e0411c0ddd61c81836f72.svg'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../u/andylolz.html'><span itemprop='name'>andylolz</span></a>
            (Andy Lulham)
          </span>

          <link itemprop="mainEntityOfPage" href="1924.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-05-06T10:48:25Z' class='post-time'>
                May 6, 2020, 10:48am
              </time>
              <meta itemprop='dateModified' content='2020-05-06T10:48:25Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>To be clear: no objections from me re. the proposals. Iâ€™m certainly in favour of upgrading to python 3 while retaining existing functionality as much as possible (which I think is the spirit of the first proposal), and fixing bugs including rounding bugs (which I think is the spirit of the second proposal).</p>
<p>I suspect there are other rounding errors in this code (due to <a href="https://en.wikipedia.org/wiki/Round-off_error" rel="nofollow noopener">premature rounding</a>) but those should be addressed separate to the python 3 upgrade.</p>
        </div>

        <meta itemprop='headline' content='Python3 Upgrade: Proposed Publishing Statistics Changes (comment by 15th April)'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../index.html' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../categories.html' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../guidelines.html' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='../../tos.html' itemprop="url">Terms of Service </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org/">Discourse</a></p>
    </footer>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-107364622-1"></script>
<script src="../../theme-javascripts/4253779dfdd8746a6d2d7a4caed66d6a3c739ecc.js_%3b%20filename_%3dUTF-8%27%274253779dfdd8746a6d2d7a4caed66d6a3c739ecc1522.js?__ws=discuss.iatistandard.org"></script>
<div id="pre-footer">
	<div id="footer-additional">
		<div id="footer-social">
			<aside id="sidebar_social_links" class="widget widget_social_links">
				<div class="text-widget">
					<ul class="social-links">
						<li class="social twitter"><a href="https://twitter.com/codeforiati">Twitter</a></li>
						<li class="social rss"><a href="feed://support.iatistandard.org/home/index.rss">RSS</a></li>
					</ul>
				</div>
			</aside>
		</div>
		<!--#footer-social -->
	</div>
</div>
    
  </body>
  

<!-- Mirrored from discuss.iatistandard.org/t/python3-upgrade-proposed-publishing-statistics-changes-comment-by-15th-april/1924 by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 21 Jan 2021 15:31:39 GMT -->
</html>
